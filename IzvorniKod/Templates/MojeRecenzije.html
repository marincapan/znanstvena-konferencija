{% load static %}
<!DOCTYPE html>
<html>
  <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>
          Moje recenzije
        </title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="{% static '/vectors/icon.svg' %}">
        <link href="{% static '/css/bootstrap.min.css' %}" rel="stylesheet">
        <link href="{% static '/css/headers.css' %}" rel="stylesheet">
        <!--nas css-->
        <link rel="stylesheet" href="{% static '/css/mycss.css' %}">
        <!--nas css-->
        <script src="{% static '/js/bootstrap.bundle.min.js' %}"></script>
  </head>

  <body>
        <!--HEADER-->
        {% include "./Header.html" %}
        <!--HEADER-->
        
        <div class="gradient-custom-3 " style="min-height: 100vh;">
            <div class="container pt-5 pb-5">
              <div class="card" style="border-radius: 15px;">
                <div class="card-body p-5">
                  <div class="text-uppercase text-center mb-5">
                    <h2>Dostupni radovi</h2>
                    <hr>
                  </div>
                  {%for rad in fetchedRadovi%}
                    {%if rad.recenziranBool == 0 and rad.pdf%}
                      <h2>{{rad.naslov}}</h2>
                      <a class="btn btn-primary" href="Radovi/{{rad.pdf}}" role="button">Otvori rad</a>
                      <form action="/mojerecenzije" method="post" id='#'>
                        {% csrf_token %}
                        {%for ocjena in fetchedOcjene%}
                          <div>
                            <input type="radio" id="{{ocjena.znacenje}}" name="{{rad.sifRad}}ocjena" value="{{ocjena.znacenje}}" style="block" {%if ocjena.id == 1%}checked onclick=UpdateOnOne(){%else%}onclick=UpdateOnElse(){%endif%}>{{ocjena.znacenje}}
                          </div>
                        {%endfor%}
                        <!--Ako je rad vec bio jednom ocjenjen i sad je poslana revizija-->
                        {%for recenzija in fetchedRecenzije%}
                          {%if recenzija.rad == rad and recenzija.ocjena.id != 1%}
                            <div>
                              <h3>Revizija rada zatrazena od strane recenzenta: {{recenzija.recenzent.ime}} {{recenzija.recenzent.prezime}}</h3>
                            </div>
                          {%endif%}
                        {%endfor%}
                        <input type="text" id="obrazlozenje" name="{{rad.sifRad}}obrazlozenje" class="form-control form-control-lg"/>
                        <button type="submit" class="btn btn-primary" name="{{rad.sifRad}}">Ocijeni rad</button>                     
                      </form>
                    {%endif%}
                  {%endfor%}
                  <div class="container">
                    <i>Jo≈° nije istekao rok za prijavu radova. Nakon isteka roka, dobivate radove za recenziranje.</i>
                  </div>
                  {%if fetchedMyRecenzije%}
                    <div class="text-uppercase text-center mb-5">
                      <h2>Moje recenzije</h2>
                      <hr>
                    </div>
                    {%for recenzija in fetchedMyRecenzije%}
                      <h2>{{recenzija.rad.naslov}}</h2>
                      <a class="btn btn-primary" href="Radovi/{{recenzija.rad.pdf}}" role="button">Otvori rad</a>
                      <h2>{{recenzija.ocjena.znacenje}}</h2>
                      <h2>{{recenzija.obrazlozenje}}</h2>
                    {%endfor%}
                  {%endif%}
                </div>
                
              </div>
            </div>
          </div>

        <!--FOOTER-->
        {% include "./Footer.html" %}
        <!--FOOTER-->
  </body>

  <!--nas js-->
  <script src="{% static '/js/hamburgerActions.js' %}"></script>
  <script>
    function UpdateOnOne(){
      document.getElementById("obrazlozenje").required = false;
    }
    function UpdateOnElse(){
      document.getElementById("obrazlozenje").required = true;
    }

  </script>
  <!--nas js-->

</html>